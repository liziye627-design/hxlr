# 狼人杀游戏 V3.0 更新说明

## 🎯 本次更新内容

### ✅ 已实现功能

#### 1. 角色分配系统
- **随机角色分配**：游戏开始时自动随机分配角色
- **身份展示**：玩家进入游戏后会看到自己的角色卡片
- **角色卡片**：
  - 显示角色名称（狼人、预言家、女巫、守卫、猎人、平民）
  - 显示角色图片（目前使用占位符，可替换为实际图片）
  - 显示角色说明和阵营信息
  - 玩家确认后开始游戏

#### 2. 语音输入功能
- **浏览器语音识别**：使用Web Speech API实现语音转文字
- **语音按钮**：在输入区域添加麦克风按钮
- **实时识别**：语音内容实时转换为文字并填入输入框
- **状态提示**：录音状态实时反馈
- **浏览器兼容**：
  - ✅ Chrome浏览器完全支持
  - ✅ Edge浏览器完全支持
  - ⚠️ Firefox、Safari支持有限

#### 3. 游戏流程优化
- **角色隐藏**：玩家只能看到自己的角色，看不到其他人的身份
- **阵营标识**：清晰显示狼人阵营或好人阵营
- **角色技能说明**：每个角色都有对应的技能说明

## 📋 使用说明

### 如何查看自己的角色

1. 进入游戏后，会自动弹出角色卡片对话框
2. 卡片显示：
   - 你的角色名称
   - 角色图片
   - 角色技能说明
   - 所属阵营
3. 点击"我知道了，开始游戏"按钮关闭卡片
4. 如果需要再次查看，可以在游戏中查看玩家列表中的自己

### 如何使用语音输入

1. 确保使用Chrome或Edge浏览器
2. 点击输入框下方的"语音输入"按钮（麦克风图标）
3. 浏览器会请求麦克风权限，点击"允许"
4. 开始说话，语音会自动转换为文字
5. 识别完成后，文字会自动填入输入框
6. 点击"发送"按钮发送消息
7. 如需停止录音，点击"停止录音"按钮

### 语音输入技巧

- **清晰发音**：尽量清晰地说话，避免背景噪音
- **短句输入**：建议使用短句，识别准确率更高
- **检查内容**：发送前检查识别的文字是否正确
- **手动修改**：识别错误的内容可以手动修改

## 🎮 角色说明

### 狼人阵营
- **狼人**：夜晚可以与其他狼人商议击杀目标

### 好人阵营
- **平民**：白天通过发言和投票找出狼人
- **预言家**：每晚可以查验一名玩家的身份
- **女巫**：拥有一瓶解药和一瓶毒药
- **猎人**：出局时可以开枪带走一名玩家
- **守卫**：每晚可以守护一名玩家

## 🔧 技术实现

### 角色分配算法
```typescript
// 根据游戏配置随机分配角色
const assignRoles = (playerCount, config) => {
  const roles = [];
  // 添加各种角色
  // 打乱数组
  return roles.sort(() => Math.random() - 0.5);
};
```

### 语音识别实现
```typescript
// 使用Web Speech API
const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = 'zh-CN'; // 中文识别
recognition.continuous = false; // 单次识别
recognition.interimResults = false; // 只返回最终结果
```

## 📝 待实现功能

### Phase 2: 完整游戏逻辑（下一步）
- [ ] 夜晚阶段行动系统
  - [ ] 守卫守护
  - [ ] 狼人击杀
  - [ ] 女巫用药
  - [ ] 预言家验人
- [ ] 白天阶段系统
  - [ ] 公布死亡信息
  - [ ] 轮流发言
  - [ ] 投票放逐
- [ ] 胜利条件判定
- [ ] 真人+AI混合对战

### Phase 3: 高级功能
- [ ] AI模型配置系统
- [ ] 用户注册登录
- [ ] 房间系统
- [ ] TTS语音合成（AI说话）
- [ ] 完整的游戏规则实现

## 🐛 已知问题

1. **角色图片**：目前使用占位符，需要替换为实际的角色图片
2. **语音识别延迟**：网络不好时可能有延迟
3. **浏览器兼容性**：Firefox和Safari的语音识别支持有限

## 💡 使用建议

1. **首次使用**：建议先玩几局熟悉角色和流程
2. **语音输入**：在安静环境下使用效果更好
3. **角色记忆**：记住自己的角色，不要暴露身份
4. **策略思考**：根据角色特点制定游戏策略

## 📞 反馈

如有问题或建议，请及时反馈：
- 角色分配是否正常
- 语音识别是否准确
- 游戏体验是否流畅

---

**更新时间**: 2025-01-10  
**版本**: V3.0-Alpha  
**状态**: ✅ 核心功能已实现
